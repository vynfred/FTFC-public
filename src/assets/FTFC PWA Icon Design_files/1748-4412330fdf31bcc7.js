"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1748],{32559:function(e,t,a){a.d(t,{GO:function(){return b},Gm:function(){return z},Kn:function(){return C},O3:function(){return h},Qs:function(){return _},RN:function(){return v},Yc:function(){return x},bQ:function(){return y},cd:function(){return i},dY:function(){return j},iR:function(){return k},nL:function(){return r}});var n,i,r,l=a(28803),o=a(5362),s=a(27218),u=a(30947),c=a(13262),d=a(77930),f=a(21520),p=a.n(f),m=a(7653),g=a(95586);(i||(i={})).Student="student",(n=r||(r={})).Study="study",n.Career="career",n.Research="research";let h=function(){let{enabled:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,s.t)(),a=(0,g.U)(),n=null==t?void 0:t.uuid,i=new URLSearchParams;return i.append("include_harmony_projects","true"),(0,o.WE)("/api/organizations/".concat(n,"/projects?").concat(i.toString()),{queryKey:[c.gi,{orgUuid:n}],enabled:!!(e&&t&&a),select:e=>e.filter(e=>!e.archived_at)})},v=()=>{let{activeOrganization:e}=(0,s.t)(),t=(0,o.OJ)();return(0,m.useCallback)(async()=>(await t("/api/organizations/".concat(null==e?void 0:e.uuid,"/projects"))).json(),[null==e?void 0:e.uuid,t])},y=()=>{let{data:e,isLoading:t}=h();return{data:null==e?void 0:e.filter(e=>e.is_starred),isLoading:t}},w=(e,t)=>{let a=e.map(e=>({...e,lastConversation:null==t?void 0:t.find(t=>t.project_uuid===e.uuid)})).filter(e=>e.lastConversation).sort((e,t)=>new Date(t.lastConversation.created_at).getTime()-new Date(e.lastConversation.created_at).getTime()),n=null==e?void 0:e.filter(e=>!a.find(t=>t.uuid===e.uuid));return[...a,...n]},b=()=>{let e=v(),t=(0,l.Pe)();return(0,m.useCallback)(async()=>{let[a,n]=await Promise.all([e(),t({limit:l.bf})]);return w(a,n)},[t,e])},x=e=>{let{activeOrganization:t}=(0,s.t)(),a=null==t?void 0:t.uuid;return(0,o.WE)("/api/organizations/".concat(a,"/projects/").concat(e),{queryKey:[c.$T,{orgUuid:a,projectUuid:e}],enabled:!!(t&&e),staleTime:0,meta:{noToast:e=>e instanceof u.Hx&&404===e.statusCode}})},_=()=>{let{activeOrganization:e}=(0,s.t)(),t=null==e?void 0:e.uuid,a=(0,d.useQueryClient)();return(0,o.uC)(()=>"/api/organizations/".concat(t,"/projects"),"POST",{onSuccess:()=>{a.invalidateQueries({queryKey:[c.gi,{orgUuid:t}]}),a.invalidateQueries({queryKey:[c.n$,{orgUuid:t}]})}})},j=e=>{let{activeOrganization:t}=(0,s.t)(),a=null==t?void 0:t.uuid,n=z();return(0,o.Ne)(()=>"/api/organizations/".concat(a,"/projects/").concat(e),"PUT",(e,t)=>t?{...t,...e}:void 0,{onSuccess:()=>{n(e)},queryKey:[c.$T,{orgUuid:a,projectUuid:e}]})},k=e=>{let{activeOrganization:t}=(0,s.t)(),a=null==t?void 0:t.uuid;return(0,o.WE)("/api/organizations/".concat(a,"/projects/").concat(e,"/conversations"),{queryKey:[c.lx,{orgUuid:a,projectUuid:e}],enabled:!!t,staleTime:0,select:e=>p()(e,e=>new Date(e.updated_at)).reverse()})},C=()=>{var e,t;let a=h(),n=null===(t=a.data)||void 0===t?void 0:null===(e=t.find(e=>e.is_starter_project))||void 0===e?void 0:e.uuid;return{...a,data:n}},z=()=>{let{activeOrganization:e}=(0,s.t)(),t=null==e?void 0:e.uuid,a=(0,d.useQueryClient)();return e=>{a.invalidateQueries({queryKey:[c.$T,{orgUuid:t,projectUuid:e}]}),a.invalidateQueries({queryKey:[c.gi,{orgUuid:t}]}),a.invalidateQueries({queryKey:[c.n$,{orgUuid:t}]}),a.invalidateQueries({queryKey:[c.lx,{orgUuid:t,projectUuid:e}]})}}},26525:function(e,t,a){a.d(t,{Ch:function(){return P},H0:function(){return W},Qe:function(){return z},Qt:function(){return S},Vn:function(){return K},kR:function(){return Q},kS:function(){return U},sE:function(){return q}});var n=a(41596),i=a(27573),r=a(5161),l=a(99205),o=a(76220),s=a(3053),u=a(5362),c=a(27218),d=a(27895),f=a(9788),p=a(32737),m=a(30947),g=a(6385),h=a(87033),v=a(35807),y=a(42755),w=a(45144),b=a(7653),x=a(45790),_=a(40950),j=a(41496),k=a(1804);function C(){let e=(0,n._)(["\n  relative\n  grid\n  place-content-center\n  aspect-square\n  rounded-xl\n  cursor-pointer\n  transition\n  [fieldset:not(:disabled)_&]:hover:bg-bg-400\n  [fieldset:disabled_&]:opacity-50\n  [fieldset:disabled_&]:pointer-events-none\n  focus-within:ring\n  inline-flex\n  items-center\n  justify-center\n  relative\n  shrink-0\n  ring-offset-2\n  ring-offset-bg-300\n  ring-accent-main-100\n  focus-visible:outline-none\n  focus-visible:ring-1\n  disabled:pointer-events-none\n  disabled:opacity-50\n  disabled:shadow-none\n  disabled:drop-shadow-none\n  bg-[radial-gradient(ellipse,_var(--tw-gradient-stops))]\n  from-bg-500/10\n  from-50%\n  to-bg-500/30\n  border-0.5\n  border-border-400\n  font-medium\n  font-styrene\n  text-text-100/90\n  transition-colors\n  active:bg-bg-500/50\n  hover:text-text-000\n  hover:bg-bg-500/60\n"]);return C=function(){return e},e}let z=20,M=e=>{let t=e.webkitRelativePath;return t&&t.length?t:e.name},T=e=>e.replace(/\0/g,""),P=e=>{e.extracted_content=T(e.extracted_content),e.file_name=T(e.file_name),e.file_type=T(e.file_type)},Z=(e,t)=>({file_name:M(e),file_type:e.type,file_size:e.size,extracted_content:t});function U(e){let{syncSourceCount:t,files:a,setFiles:n,numExistingConversationFiles:s,attachments:u,setAttachments:c,numExistingConversationAttachments:f,detectSameAttachment:m,selectedModel:g,blobFileUploadsEnabled:h}=e,{addError:w}=(0,d.e)(),j=(0,l.wN)(null);return function(e){let{syncSourceCount:t,onUploadComplete:a,existingAttachments:n,existingFiles:l,numExistingConversationAttachments:s,numExistingConversationFiles:u,selectedModel:c,blobFileUploadsEnabled:d}=e,f=(0,_.Z)(),{modelConfig:m}=(0,o.V)(c),g=m.image_in,[h,w,j,k]=function(e){let{syncSourceCount:t,onUploadComplete:a,existingAttachments:n,existingFiles:l,numExistingConversationFiles:s,selectedModel:u,blobFileUploadsEnabled:c}=e,{modelConfig:d}=(0,o.V)(u),f=d.image_in,p=W()&&d.pdf_in,{isUploading:m,setIsUploading:g,handleError:h,handleUpload:v}=K({imagesEnabled:f,blobFileUploadsEnabled:c,onUploadComplete:a,rasterizePdfUploadsEnabled:p}),y=(0,b.useCallback)(e=>{let{newUploads:a=[],numNewPotentialAttachments:o=0,showError:u=!0}=e,{attachmentUploads:d,imageUploads:m,rasterizedDocumentUploads:g,outOfContextFileUploads:v}=(0,r.Jw)(a,{imagesEnabled:f,blobFileUploadsEnabled:c,rasterizePdfUploadsEnabled:p});return o+d.length+m.length+g.length+v.length+n.length+l.length+t>z?(u&&h((0,i.jsx)(x.Z,{defaultMessage:"You can add at most {count, plural, one {# attachment} other {# attachments}} to a message. Please select fewer attachments.",id:"qxV00r12ob",values:{count:z}})),!1):!(m.length+g.length+l.length+s>100)||(u&&h((0,i.jsx)(x.Z,{defaultMessage:"You can add at most {count, plural, one {# file} other {# files}} to a chat. {suggestion}",id:"QyrCxYs5Jy",values:{count:100,suggestion:s<100?(0,i.jsx)(x.Z,{defaultMessage:"Please select fewer files.",id:"a6KVizNPLe"}):(0,i.jsx)(x.Z,{defaultMessage:"Please consider starting a new chat.",id:"oN0R8lZNm6"})}})),!1)},[f,c,n,l,t,s,h,p]);return[m,g,y,(0,b.useCallback)(async e=>{y({newUploads:e})&&await v(e)},[v,y])]}({syncSourceCount:t,onUploadComplete:a,existingFiles:l,existingAttachments:n,numExistingConversationFiles:u,numExistingConversationAttachments:s,selectedModel:c,blobFileUploadsEnabled:d}),C=function(e){let{handleUpload:t}=e,a=(0,b.useRef)({ready:0,total:0}),n=(0,b.useCallback)(()=>{a.current={ready:0,total:0}},[]),i=(0,b.useCallback)(e=>{a.current.ready+=1,a.current.total===a.current.ready&&t(e)},[t]),r=(0,b.useCallback)((e,t)=>{let n=e.length;for(let l=0;l<n;l++){let n=e[l];n.isFile?(a.current.total+=1,n.file(e=>{t.push(e),i(t)})):n.isDirectory&&n.createReader().readEntries(e=>{r(e,t)})}},[i]);return(0,b.useCallback)(e=>{var t;e.preventDefault(),n();let a=null===(t=e.dataTransfer)||void 0===t?void 0:t.items;if(!a)return;let i=[];for(let e=0;e<(null==a?void 0:a.length);e++){let t=a[e].webkitGetAsEntry();t&&i.push(t)}r(i,[])},[r,n])}({handleUpload:k}),M=(0,b.useCallback)(async e=>{await k(Array.from(e))},[k]),T=(0,b.useCallback)(async e=>{let t=e.target.files;t&&await k(Array.from(t)),e.target.value=""},[k]),P=g?(0,i.jsx)(x.Z,{defaultMessage:"Upload docs or images to Claude\\n(Max {maxUploads}, 30mb each)",id:"ialBpH0eLp",values:{maxUploads:z}}):(0,i.jsx)(x.Z,{defaultMessage:"Add content ({maxUploads} max, 30mb each)\\nAccepts pdf, txt, csv, etc.",id:"70asB5brJP",values:{maxUploads:z}}),Z=(0,b.useCallback)(e=>{T(e)},[T]),U=(0,b.useMemo)(()=>({type:"file",accept:(0,r.tB)({imagesEnabled:g,outOfContextFilesEnabled:d}).join(","),onChange:Z,multiple:!0,"aria-label":f.formatMessage({defaultMessage:"Upload files",id:"2jjdVzJX0c"})}),[d,g,Z,f]);return[h,w,j,C,M,k,(0,i.jsx)(p.u,{className:"text-center",tooltipContent:P,children:(0,i.jsxs)(R,{children:[(0,i.jsx)("input",{"data-testid":"file-upload",className:"absolute inset-0 -z-10 overflow-hidden rounded-xl opacity-0",...U}),h?(0,i.jsx)(v.U,{className:"animate-spin",size:18}):(0,i.jsx)(y.p,{size:18,weight:"light"})]})},"upload-tooltip"),U]}({syncSourceCount:t,onUploadComplete:(0,b.useCallback)(async(e,t)=>{m&&e.find(e=>m(e.extracted_content))&&w((0,i.jsx)(x.Z,{defaultMessage:"The same attachment was already added earlier. Claude sees the full conversation when replying, so thereâ€™s no need to re-upload.",id:"Uo3qvhGn7z"})),c(t=>[...t,...e]),n(e=>[...e,...t])},[c,m,w,n]),existingAttachments:u,existingFiles:a,numExistingConversationAttachments:f,numExistingConversationFiles:s,selectedModel:null!=g?g:j,blobFileUploadsEnabled:h})}let F=async(e,t,a)=>{let n=new Image;if(n.src=URL.createObjectURL(e),await new Promise(e=>{n.onload=e,setTimeout(e,250)}),!n.width||!n.height||"image/png"!==e.type&&n.width<=t&&n.height<=a)return e;let i=n.width/n.height,r=n.width,l=n.height;n.width>t&&(l=(r=t)/i),l>a&&(r=(l=a)*i);let o=document.createElement("canvas");o.style.display="none",document.body.appendChild(o);let s=o.getContext("2d");if(!s||!s.imageSmoothingQuality)return document.body.removeChild(o),e;s.imageSmoothingQuality="high",o.width=r,o.height=l,s.drawImage(n,0,0,r,l);let u=await new Promise(e=>{o.toBlob(t=>e(t),"image/webp",.85)});return(document.body.removeChild(o),u)?new File([u],e.name,{type:"image/webp"}):e},q=()=>{let{value:e}=(0,h.FL)("use_canvas_resize");return(0,b.useCallback)(async t=>e?await F(t,2e3,2e3):t,[e])},S=()=>{let e=O(),t=Q();return async(a,n,i)=>{try{return await t(a,n,i)}catch(t){e(t,(0,r.Wr)(a)?"image":"file")}}},D=e=>{let t=O(),a=Q(),n=(0,u.OJ)();return async(i,r,l)=>{let o={};try{o.file=await a(i,r,l)}catch(a){a instanceof m.Hx&&"document_too_many_pages"===a.errorCode?o.attachment=await L(n,i,r,e):t(a,"document")}return o}},Q=()=>{let e=(0,u.OJ)();return async(t,a,n)=>{let i=new FormData;i.append("file",t);let r=n?"/api/organizations/".concat(a,"/projects/").concat(n,"/upload"):"/api/".concat(a,"/upload"),l=await e(r,{method:"POST",body:i}),o=await l.json();if(l.ok)return o;throw(0,m.fT)(l.status,o,"File upload failed",l.headers)}},E=async(e,t,a,n)=>{let r;let l=new FormData;l.append("file",t);try{r=await e("/api/organizations/".concat(a,"/convert_document"),{method:"POST",body:l})}catch(e){return(0,w.Tb)(e),n((0,i.jsx)(x.Z,{defaultMessage:"One or more file uploads have failed. Please try again.",id:"FIwcYDeyIC"}))}if(429===r.status)return n((0,i.jsx)(x.Z,{defaultMessage:"Too many file upload attempts. Please wait and try again later.",id:"h/6cMHSn1V"}));if(413===r.status)return n((0,i.jsx)(x.Z,{defaultMessage:"Uploaded file is too large. Try uploading a smaller part of the document, or copy/pasting an excerpt from the file.",id:"/mCoauj3Ws"}));if(!r.ok)return n((0,i.jsx)(x.Z,{defaultMessage:"Text extraction failed for one of the uploaded files. Please try again.",id:"ngYPeW4aWf"}));let o=await r.json();return o&&0!==Object.keys(o).length&&o.extracted_content?(o.file_name=M(t),o):n((0,i.jsx)(x.Z,{defaultMessage:"Text extraction failed for one of the uploaded files. Please try again.",id:"ngYPeW4aWf"}))},K=e=>{var t;let{imagesEnabled:a,blobFileUploadsEnabled:n,rasterizePdfUploadsEnabled:l,onUploadComplete:o,onError:f,projectUuid:p}=e,{activeOrganization:m}=(0,c.t)(),h=null!==(t=null==m?void 0:m.uuid)&&void 0!==t?t:"",[v,y]=(0,b.useState)(!1),{addError:w}=(0,d.e)(),_=(0,b.useCallback)(e=>{y(!1),w(e),f&&f()},[w,f,y]),k=q(),C=S(),z=D(_),M=(0,u.OJ)(),T=(0,s.z$)(),P=(0,b.useCallback)(async(e,t)=>{let{attachmentUploads:s,imageUploads:u,rasterizedDocumentUploads:c,unsupportedUploads:d,tooLargeUploads:f,outOfContextFileUploads:m}=(0,r.Jw)(e,{imagesEnabled:a,blobFileUploadsEnabled:n,rasterizePdfUploadsEnabled:l}),v=d.map(e=>(0,r.mD)(e.name));if(v.length>0)return _((0,i.jsx)(x.Z,{defaultMessage:"Files of the following {count, plural, one {format is} other {formats are}} not supported: {formats}",id:"9JcWWPAZoB",values:{count:v.length,formats:(0,i.jsx)(j.yX,{type:"conjunction",value:[...new Set(v)]})}}));if(f.length>0)return T.track({event_key:"file_upload_too_large",large_files:f.map(e=>({file_type:e.type,file_size:e.size}))}),_((0,i.jsx)(x.Z,{defaultMessage:"You may not upload files larger than 30mb.",id:"Gr/GvEZTX1"}));y(!0);let w=[],b=0,P=(e,a)=>{if(void 0===t)return!0;let n=new Blob([a]).size/g.r6;return!((b+=n)>t)||(_((0,i.jsx)(x.Z,{defaultMessage:"Failed to upload file {filename}. Project knowledge exceeds maximum. Remove files to continue.",id:"MbvF6K3PJd",values:{filename:e}})),!1)};for(let e of s){let t=await L(M,e,h,_);if(!(t&&P(e.name,t.extracted_content)))return;await o([t],[])}for(let e of u){let t=await k(e),a=await C(t,h,p);a&&w.push(a)}for(let e of c){let{file:t,attachment:a}=await z(e,h,p);if(t&&w.push(t),a){if(!P(e.name,a.extracted_content))return;await o([a],[])}}for(let e of m){let t=await C(e,h,p);t&&w.push(t)}await o([],w),y(!1)},[n,M,o,a,_,C,z,h,k,T,l,p]);return{isUploading:v,setIsUploading:y,handleError:_,handleUpload:P}},R=f.q.label(C()),L=async(e,t,a,n)=>{if(!(0,r.dF)(t))try{let e=await (0,r.CL)(t);return Z(t,e)}catch(e){}let i=await E(e,t,a,n);if(i)return P(i),i},O=()=>{let{addError:e}=(0,d.e)();return(0,b.useCallback)((t,a)=>{if(t instanceof m.Hx){if("rate_limit_error"===t.type){e((0,i.jsxs)("p",{children:[(0,i.jsx)(x.Z,{defaultMessage:"Youâ€™ve reached your limit for {resourceType} uploads. Please try again later.",id:"M88GeEDB7r",values:{resourceType:a}}),(0,i.jsx)(k.o,{})]}));return}if("document_password_protected"===t.errorCode){e((0,i.jsx)("p",{children:(0,i.jsx)(x.Z,{defaultMessage:"The document you uploaded is password protected. Please remove the password and try again.",id:"DHwwKwuaCR"})}));return}}if(t instanceof m.Hx&&"Image is too large"===t.message){e((0,i.jsx)("p",{children:(0,i.jsx)(x.Z,{defaultMessage:"Image is too large. <link>Learn more</link>",id:"SFbt+MAvby",values:{link:e=>(0,i.jsx)("a",{href:"https://support.anthropic.com/en/articles/9002500-what-kinds-of-images-can-i-upload-to-claude-ai",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-accent-main-100",children:e})}})}));return}e((0,i.jsx)("p",{children:(0,i.jsx)(x.Z,{defaultMessage:"Your {resourceType} upload failed. Please try again.",id:"ymWsV10Pz1",values:{resourceType:a}})}))},[e])},W=()=>{let{value:e}=(0,h.FL)("janus_claude-ai");return e}},5161:function(e,t,a){a.d(t,{CL:function(){return T},Jw:function(){return C},Wr:function(){return _},dF:function(){return z},eh:function(){return P},mD:function(){return b},tB:function(){return v},wI:function(){return c}});var n=a(27218),i=a(1812),r=a(87033),l=a(18916);let o=[".DS_Store"],s=["jpg","jpeg","png","gif","webp"],u=["image/jpeg","image/png","image/gif","image/webp"],c={"image/jpeg":"jpg","image/png":"png","image/gif":"gif","image/webp":"webp"},d=["bmp","ico","tiff","tif","psd","raw","cr2","nef","orf","sr2","mobi","jp2","jpx","jpm","mj2","svg","svgz","ai","eps","ps","indd","heic","mp4","mov","avi","mkv","wmv","flv","webm","mpeg","mpg","m4v","3gp","ogv","ogg","rm","rmvb","asf","amv","mpe","m1v","m2v","svi","3g2","roq","nsv","f4v","f4p","f4a","f4b","qt","hdmov","divx","div","m2ts","mts","vob","mp3","wav","wma","aac","flac","alac","aiff","ogg","opus","m4a","amr","awb","wmv","ra","rm","mid","midi","mka","ttf","otf","woff","woff2","eot","sfnt","ttc","suit","zip"],f=["xls","xlsx","xlsb","xlm","xlsm","xlt","xltm","xltx","ods"],p=["txt","py","ipynb","js","jsx","html","css","java","cs","php","c","cc","cpp","cxx","cts","h","hh","hpp","rs","R","Rmd","swift","go","rb","kt","kts","ts","tsx","m","mm","mts","scala","rs","dart","lua","pl","pm","t","sh","bash","zsh","csv","log","ini","cfg","config","json","proto","yaml","yml","toml","lua","sql","bat","md","coffee","tex","latex","gd","gdshader","tres","tscn"],m=["docx","rtf","epub","odt","odp","pdf"],g=["application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/rtf","application/epub+zip","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.presentation","application/pdf"],h=["csv"],v=e=>{let{imagesEnabled:t=!1,outOfContextFilesEnabled:a=!1}=e;return[".pdf",".doc",".docx",".rtf",".epub",".odt",".odp",".pptx",...w(),...t?y():[],...a?f.map(e=>".".concat(e)):[]]},y=()=>s.map(e=>".".concat(e)),w=()=>p.map(e=>".".concat(e)),b=e=>e.split(".").pop().toLowerCase(),x=(e,t)=>{let{imagesEnabled:a=!1,blobFileUploadsEnabled:n=!1}=t,i=b(e.name);return!!(!a&&(s.includes(i)||u.includes(e.type)))||(n?d.includes(i):[...d,...f].includes(i))},_=e=>{let t=b(e.name);return s.includes(t)||u.includes(e.type)},j=e=>[...h,...f].includes(b(e.name)),k=e=>!!o.includes(e.name),C=(e,t)=>{let{imagesEnabled:a=!1,blobFileUploadsEnabled:n=!1,rasterizePdfUploadsEnabled:i}=t,r=[],l=[],o=[],s=[],u=[],c=[];return e.filter(e=>!k(e)).forEach(e=>{let t=a&&_(e);x(e,{imagesEnabled:a,blobFileUploadsEnabled:n})?u.push(e):e.size>3e7?c.push(e):n&&j(e)?o.push(e):i&&("pdf"===b(e.name)||"application/pdf"===e.type)?s.push(e):z(e)?r.push(e):t?l.push(e):r.push(e)}),{attachmentUploads:r,imageUploads:l,rasterizedDocumentUploads:s,unsupportedUploads:u,tooLargeUploads:c,outOfContextFileUploads:o}},z=e=>{let t=b(e.name);return m.includes(t)||g.includes(e.type)},M=e=>{let t=new Uint8Array(e);if(t.length>=4){if(239===t[0]&&187===t[1]&&191===t[2])return"utf-8";if(254===t[0]&&255===t[1]||255===t[0]&&254===t[1])return"utf-16";if(0===t[0]&&0===t[1]&&254===t[2]&&255===t[3]||255===t[0]&&254===t[1]&&0===t[2]&&0===t[3])return"utf-32"}let a=!0,n=Math.min(t.length-1,1e3);for(let e=0;e<n;e+=2)if(0===t[e]&&0===t[e+1]||0!==t[e]&&0!==t[e+1]){a=!1;break}if(a)return"utf-16";let i=!0,r=!1;for(let e=0;e<t.length;e++){let a=t[e];if(a>127){if(r=!0,(224&a)==192){if(e+1>=t.length||(192&t[e+1])!=128){i=!1;break}e+=1}else if((240&a)==224){if(e+2>=t.length||(192&t[e+1])!=128||(192&t[e+2])!=128){i=!1;break}e+=2}else if((248&a)==240){if(e+3>=t.length||(192&t[e+1])!=128||(192&t[e+2])!=128||(192&t[e+3])!=128){i=!1;break}e+=3}else{i=!1;break}}}if(i&&r)return"utf-8";let l=(e=>{let t={ascii:0,nonAscii:0,cyrillic:0,latin1:0,control:0,total:Math.min(e.length,4e3)};for(let a=0;a<t.total;a++){let n=e[a];n<32?t.control++:n<127?t.ascii++:n>127&&(t.nonAscii++,(n>=192&&n<=255||n>=168&&n<=183)&&t.cyrillic++,(n>=128&&n<=159||n>=160&&n<=255)&&t.latin1++)}return t})(t),o=l.cyrillic/l.total*100,s=l.latin1/l.total*100,u=l.ascii/l.total*100;if(l.nonAscii>0){if(o>.3)return"windows-1251";if(s>l.control/l.total*100)return"windows-1252"}return u>90&&l.control/l.total<.1?"ascii":"utf-8"},T=async e=>{let t=await e.arrayBuffer(),a=M(t);try{return new TextDecoder(a,{fatal:!0}).decode(t)}catch(e){if("utf-8"!==a)return new TextDecoder("utf-8",{fatal:!0}).decode(t)}throw Error("Failed to decode file as plain text")};function P(){var e;let{value:t}=(0,r.FL)("ooc_attachments"),{account:a}=(0,n.t)(),o=(0,i.T)(),s=null!==(e=null!=o?o:null==a?void 0:a.settings)&&void 0!==e?e:{},{value:u}=(0,l.h)(s);return!!t&&u}},76220:function(e,t,a){a.d(t,{V:function(){return c},u:function(){return p}});var n=a(5362),i=a(27218),r=a(13262),l=a(87033),o=a(98649),s=a(41270);let u={image_in:!1,pdf_in:!1},c=e=>{let{activeOrganization:t}=(0,i.t)(),a=null==t?void 0:t.uuid,{data:o,isLoading:s,isPlaceholderData:c}=(0,n.WE)("/api/organizations/".concat(a,"/model_configs/").concat(e),{queryKey:[r.Qn,a,e],enabled:!!a,staleTime:3e5,meta:{noToast:!0}}),d=!c&&o||u,{value:f}=(0,l.FL)("claude_ai_cinnamon");return"claude-3-5-haiku-20241022"===e&&f&&(d={image_in:!0,pdf_in:!1}),{isLoading:s,modelConfig:d}},d=s.z.array(s.z.object({model:s.z.string(),name:s.z.string(),description:s.z.string().optional(),inactive:s.z.boolean().optional(),overflow:s.z.boolean().optional(),knowledgeCutoff:s.z.string().optional(),slow_kb_warning_threshold:s.z.number().optional(),paprika_modes:s.z.array(o.Xs).optional()})),f=[],p=()=>{let e=(0,l.Zr)("claude_ai_models","models",f,d),t=e.filter(e=>!e.inactive),a=t.filter(e=>!e.overflow),n=t.filter(e=>e.overflow);return{allModelOptions:e,activeModelOptions:t,mainModels:a,overflowModels:n}}}}]);